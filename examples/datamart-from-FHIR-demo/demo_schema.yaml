---
ecr-demo:
  Composition:
    Search Parameters:
      _since: "2022-06-02T00:00:00Z"
    Fields:
      Composition ID:
        fhir_path: Compoisition.id
        include_nulls: false
        include_unknowns: false
        selection_criteria: first
        new_name: composition_id
      Patient ID:
        fhir_path: Compoisition.subject.reference.where(startsWith("Patient/")).substring(8)
        include_nulls: false
        include_unknowns: false
        selection_criteria: first
        new_name: patient_id
      Organization ID:
        fhir_path: Compoisition.custodian.reference.where(startsWith("Organization/")).substring(13)
        include_nulls: false
        include_unknowns: false
        selection_criteria: first
        new_name: organization_id
  Patient:
    Search Parameters:
      _since: "2022-06-02T00:00:00Z"
    Fields:
      Patient ID:
        fhir_path: Patient.id
        include_nulls: false
        include_unknowns: false
        selection_criteria: first
        new_name: patient_id
      First Name:
        fhir_path: Patient.name.given
        include_nulls: false
        include_unknowns: false
        selection_criteria: first
        new_name: first_name
      Last Name:
        fhir_path: Patient.name.family
        include_nulls: false
        include_unknowns: false
        selection_criteria: first
        new_name: last_name
      Date of Birth:
        fhir_path: Patient.birthDate
        include_nulls: false
        include_unknowns: false
        selection_criteria: first
        new_name: dob
      Gender:
        fhir_path: Patient.gender
        include_nulls: false
        include_unknowns: false
        selection_criteria: first
        new_name: gender
      Race:
        fhir_path: Patient.extension.where(url="http://hl7.org/fhir/us/core/StructureDefinition/us-core-race").extension.where(url="ombCategory").valueCoding.where(system="urn:oid:2.16.840.1.113883.6.238").code
        include_nulls: false
        include_unknowns: false
        selection_criteria: first
        new_name: race
      Ethnicity:
        fhir_path: Patient.extension.where(url="http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity").extension.where(url="ombCategory").valueCoding.where(system="urn:oid:2.16.840.1.113883.6.238").code
        include_nulls: false
        include_unknowns: false
        selection_criteria: first
        new_name: ethnicity
      Phone Number:
        fhir_path: Patient.telecom.where(system = 'phone').value
        include_nulls: false
        include_unknowns: false
        selection_criteria: first
        new_name: phone_number
      Address Street:
        fhir_path: Patient.address.where(use = 'home').line
        include_nulls: false
        include_unknowns: false
        selection_criteria: first
        new_name: street
      Address City:
        fhir_path: Patient.address.where(use = 'home').city
        include_nulls: false
        include_unknowns: false
        selection_criteria: first
        new_name: city
      Address State:
        fhir_path: Patient.address.where(use = 'home').state
        include_nulls: false
        include_unknowns: false
        selection_criteria: first
        new_name: state
      Address Country:
        fhir_path: Patient.address.where(use = 'home').country
        include_nulls: false
        include_unknowns: false
        selection_criteria: first
        new_name: country
      Latitude:
        fhir_path: Patient.address.extension.where(url = 'http://hl7.org/fhir/StructureDefinition/geolocation').extension.where(url='latitude').valueDecimal
        include_nulls: false
        include_unknowns: false
        selection_criteria: first
        new_name: latitude
      Longitude:
        fhir_path: Patient.address.extension.where(url = 'http://hl7.org/fhir/StructureDefinition/geolocation').extension.where(url='longitude').valueDecimal
        include_nulls: false
        include_unknowns: false
        selection_criteria: first
        new_name: longitude
